#!/usr/bin/python
#This script was generated by the AMUSE framework
import sys
import os

if __name__ == '__main__':
    use_sockets = len(sys.argv) > 1
    if use_sockets:
        portnumber = int(sys.argv[1])
        host = sys.argv[2]
        usempi= sys.argv[3] == "true"
    else:
        usempi = True
        host = None
        portnumber = -1
        
    syspath = ('/home/losacco/Documents/COP/computational_physics_2019/FinalProject/scrap','/home/losacco/Documents/COP/computational_physics_2019/FinalProject/scrap','/software/local/lib64/python2.7/site-packages','/software/amuse/amuse-git/lib/python2.7/site-packages','/usr/lib/python27.zip','/usr/lib64/python2.7','/usr/lib64/python2.7/plat-linux2','/usr/lib64/python2.7/lib-tk','/usr/lib64/python2.7/lib-old','/usr/lib64/python2.7/lib-dynload','/home/losacco/.local/lib/python2.7/site-packages','/home/losacco/.local/lib/python2.7/site-packages/PyMieDAP-0.1-py2.7-linux-x86_64.egg','/usr/lib64/python2.7/site-packages','/usr/lib64/python2.7/site-packages/mpich','/usr/lib64/python2.7/site-packages/gst-0.10','/usr/lib64/python2.7/site-packages/gtk-2.0','/usr/lib64/python2.7/site-packages/wx-3.0-gtk3','/usr/lib/python2.7/site-packages','/software/local/lib64/python2.7/site-packages/pyregion-1.2-py2.7-linux-x86_64.egg','/software/local/lib64/python2.7/site-packages/astropy_helpers-1.3.1-py2.7.egg','/software/local/lib64/python2.7/site-packages/montage_wrapper-0.9.8-py2.7.egg','/software/local/lib64/python2.7/site-packages/xmlrunner-1.7.7-py2.7.egg','/software/local/lib64/python2.7/site-packages/lsmtool-1.2.0-py2.7.egg')
    existing_syspath = set(sys.path)
    for x in syspath:
        if not x in existing_syspath:
              sys.path.append(x)
    
    if usempi:
        from mpi4py import MPI
        from amuse.rfi.channel import MpiChannel
        MpiChannel.ensure_mpi_initialized()

    from amuse.rfi import core

    from amuse.community.galactics.interface import GalactICsImplementation
    from amuse.community.galactics.interface import GalactICsInterface

    instance = GalactICsImplementation()

    from amuse.rfi.python_code import PythonImplementation

    x = PythonImplementation(instance, GalactICsInterface)
    
    if use_sockets:
        x.start_socket(portnumber, host)
    else:
        x.start()
